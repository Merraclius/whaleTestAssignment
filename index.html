<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            --bg-color: var(--tg-theme-bg-color, #fff);
            font-family: sans-serif;
            background-color: var(--bg-color);
            color: var(--tg-theme-text-color, #222);
            font-size: 14px;
            margin: 0;
            padding: 0;
            color-scheme: var(--tg-color-scheme);
        }
    </style>
</head>
<body>
    <div id="greeting_block">
        Hello: <span id="first_name"></span> <span id="last_name"></span>
    </div>
    
    <script>
      const tgApp = window.Telegram.WebApp;
      
      if (tgApp.initDataUnsafe.user) {
        const {
          first_name,
          last_name
        } = tgApp.initDataUnsafe.user;

        // Add the validation before using the data
        document.getElementById('first_name').innerHTML = first_name;
        document.getElementById('last_name').innerHTML = last_name;
      }

      function setThemeClass() {
        document.documentElement.className = window.Telegram.WebApp.colorScheme;
      }

      window.Telegram.WebApp.onEvent('themeChanged', setThemeClass);
      setThemeClass();
    </script>
</body>
</html>
